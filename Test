import json 
import csv

def generateInnerNode(x):
    list = []
    list = (x[1:len(x)-1]).split(",")
    originalJson = '{'
    j=0
    for item in list:
      subList = item.split("=")
      i=0
      for subItem in subList:
        originalJson += '"' + subItem +'"'
        if(i%3 == 0):
          originalJson += ':'
        i = i + 1
      if(j < len(list)-1):
        originalJson += ","
      j = j + 1
    originalJson += '}'
    return originalJson;
    
    

with open('data1.txt', 'r') as file:
    array = file.read().replace('\n', '')
	

x = array
y = '';
mainList = []
res = [i for i in range(len(x)) if x.startswith('{', i)]
for i in range(len(res)):
  initial = res[i]
  if(i == len(res)-1):
    final = len(x)
  else:
    final = res[i+1]
  y = x[initial:final].strip()
  mainList.append(y)


originalOfOriginalJson = '['
k=0
for mainItem in mainList:
  result = generateInnerNode(mainItem)
  originalOfOriginalJson += result
  if(k < len(mainList) - 1):
    originalOfOriginalJson += ','
  k = k + 1
originalOfOriginalJson += ']'

print("originalOfOriginalJson is : "+originalOfOriginalJson);
data_file = open('data_file1.csv', 'w') 

csv_writer = csv.writer(data_file)

count = 0
for dataItem in json.loads(originalOfOriginalJson):
    if count == 0:
        header = dataItem.keys()
        csv_writer.writerow(header)
        count += 1 
	
    csv_writer.writerow(dataItem.values()) 

data_file.close() 
    
